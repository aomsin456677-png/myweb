<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Survival Shooter</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:#111;
  font-family:sans-serif;
  color:white;
}
#ui{
  position:absolute;
  top:10px;
  left:10px;
}
canvas{
  display:block;
}
</style>
</head>
<body>

<div id="ui">
  ‚ù§Ô∏è HP: <span id="hp">100</span><br>
  üèÜ Score: <span id="score">0</span>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = {
  x: canvas.width/2,
  y: canvas.height/2,
  size: 20,
  speed: 4,
  hp: 100
};

let keys = {};
let bullets = [];
let enemies = [];
let score = 0;

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

document.addEventListener("click", shoot);

function shoot(e){
  const angle = Math.atan2(
    e.clientY - player.y,
    e.clientX - player.x
  );

  bullets.push({
    x: player.x,
    y: player.y,
    dx: Math.cos(angle)*8,
    dy: Math.sin(angle)*8,
    size:5
  });
}

function spawnEnemy(){
  const edge = Math.floor(Math.random()*4);
  let x,y;

  if(edge===0){ x=0; y=Math.random()*canvas.height;}
  if(edge===1){ x=canvas.width; y=Math.random()*canvas.height;}
  if(edge===2){ x=Math.random()*canvas.width; y=0;}
  if(edge===3){ x=Math.random()*canvas.width; y=canvas.height;}

  enemies.push({x,y,size:20,speed:1.5});
}

setInterval(spawnEnemy,1500);

function update(){
  if(keys["w"]) player.y -= player.speed;
  if(keys["s"]) player.y += player.speed;
  if(keys["a"]) player.x -= player.speed;
  if(keys["d"]) player.x += player.speed;

  bullets.forEach((b,i)=>{
    b.x+=b.dx;
    b.y+=b.dy;
  });

  enemies.forEach((en,ei)=>{
    const angle = Math.atan2(player.y-en.y, player.x-en.x);
    en.x+=Math.cos(angle)*en.speed;
    en.y+=Math.sin(angle)*en.speed;

    // ‡∏ä‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
    const dist = Math.hypot(player.x-en.x, player.y-en.y);
    if(dist < player.size){
      player.hp -= 1;
      document.getElementById("hp").innerText = player.hp;
      if(player.hp<=0){
        alert("Game Over! Score: "+score);
        location.reload();
      }
    }

    bullets.forEach((b,bi)=>{
      const d = Math.hypot(b.x-en.x, b.y-en.y);
      if(d < en.size){
        enemies.splice(ei,1);
        bullets.splice(bi,1);
        score++;
        document.getElementById("score").innerText = score;
      }
    });
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // player
  ctx.fillStyle="cyan";
  ctx.beginPath();
  ctx.arc(player.x,player.y,player.size,0,Math.PI*2);
  ctx.fill();

  // bullets
  ctx.fillStyle="yellow";
  bullets.forEach(b=>{
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.size,0,Math.PI*2);
    ctx.fill();
  });

  // enemies
  ctx.fillStyle="red";
  enemies.forEach(en=>{
    ctx.beginPath();
    ctx.arc(en.x,en.y,en.size,0,Math.PI*2);
    ctx.fill();
  });
}

function gameLoop(){
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
