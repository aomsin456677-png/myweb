<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>iPad Smart Notebook</title>

<style>
body{
margin:0;
overflow:hidden;
font-family:Arial;
background:#f5f5f5;
}

#toolbar{
position:fixed;
top:0;
left:0;
right:0;
height:60px;
background:white;
display:flex;
align-items:center;
gap:10px;
padding:10px;
box-shadow:0 2px 5px rgba(0,0,0,0.2);
z-index:10;
}

button{
padding:8px 12px;
border:none;
border-radius:8px;
background:#4f46e5;
color:white;
font-size:14px;
}

input[type="color"],
input[type="range"],
select{
height:35px;
}

canvas{
position:absolute;
top:60px;
left:0;
}
</style>
</head>
<body>

<div id="toolbar">
<input type="color" id="colorPicker" value="#000000">
<input type="range" id="size" min="1" max="20" value="3">
<button onclick="setMode('draw')">‚úè ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤</button>
<button onclick="setMode('erase')">üßΩ ‡∏¢‡∏≤‡∏á‡∏•‡∏ö</button>
<button onclick="clearCanvas()">üóë ‡∏•‡πâ‡∏≤‡∏á</button>
<button onclick="saveImage()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
<select id="paperType" onchange="changePaper()">
<option value="plain">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÄ‡∏õ‡∏•‡πà‡∏≤</option>
<option value="line">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÄ‡∏™‡πâ‡∏ô</option>
<option value="grid">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ï‡∏≤‡∏£‡∏≤‡∏á</option>
</select>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let drawing = false;
let mode = "draw";

function resizeCanvas(){
canvas.width = window.innerWidth;
canvas.height = window.innerHeight - 60;
changePaper();
}
resizeCanvas();
window.onresize = resizeCanvas;

canvas.addEventListener("pointerdown", e=>{
drawing = true;
draw(e);
});
canvas.addEventListener("pointermove", draw);
canvas.addEventListener("pointerup", ()=>drawing=false);
canvas.addEventListener("pointerout", ()=>drawing=false);

function draw(e){
if(!drawing) return;

let rect = canvas.getBoundingClientRect();
let x = e.clientX - rect.left;
let y = e.clientY - rect.top;

ctx.lineCap = "round";
ctx.lineJoin = "round";

if(mode === "erase"){
ctx.globalCompositeOperation = "destination-out";
ctx.lineWidth = 20;
}else{
ctx.globalCompositeOperation = "source-over";
ctx.strokeStyle = document.getElementById("colorPicker").value;
ctx.lineWidth = document.getElementById("size").value * (e.pressure || 1);
}

ctx.lineTo(x,y);
ctx.stroke();
ctx.beginPath();
ctx.moveTo(x,y);
}

function setMode(m){
mode = m;
}

function clearCanvas(){
ctx.clearRect(0,0,canvas.width,canvas.height);
changePaper();
}

function saveImage(){
let link = document.createElement("a");
link.download = "‡πÇ‡∏ô‡πâ‡∏ï.png";
link.href = canvas.toDataURL();
link.click();
}

function changePaper(){
let type = document.getElementById("paperType").value;
ctx.clearRect(0,0,canvas.width,canvas.height);

if(type === "line"){
ctx.strokeStyle = "#ddd";
for(let i=20;i<canvas.height;i+=30){
ctx.beginPath();
ctx.moveTo(0,i);
ctx.lineTo(canvas.width,i);
ctx.stroke();
}
}

if(type === "grid"){
ctx.strokeStyle = "#eee";
for(let i=20;i<canvas.height;i+=25){
ctx.beginPath();
ctx.moveTo(0,i);
ctx.lineTo(canvas.width,i);
ctx.stroke();
}
for(let j=20;j<canvas.width;j+=25){
ctx.beginPath();
ctx.moveTo(j,0);
ctx.lineTo(j,canvas.height);
ctx.stroke();
}
}
}

</script>

</body>
</html>
