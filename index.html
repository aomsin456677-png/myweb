<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MemoryGram</title>

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Prompt',sans-serif;}

body{
background:#0f0f14;
color:white;
transition:0.4s;
}

header{
display:flex;
justify-content:space-between;
align-items:center;
padding:15px 30px;
background:rgba(255,255,255,0.05);
backdrop-filter:blur(20px);
position:sticky;
top:0;
z-index:100;
}

header h1{
font-weight:700;
font-size:22px;
background:linear-gradient(90deg,#6a5cff,#00f2ff);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

button{
padding:8px 16px;
border:none;
border-radius:20px;
background:linear-gradient(90deg,#6a5cff,#00f2ff);
color:white;
cursor:pointer;
}

.container{
max-width:700px;
margin:20px auto;
padding:0 15px;
}

/* Stories */
.stories{
display:flex;
gap:15px;
overflow-x:auto;
padding:15px 0;
}

.story{
width:70px;
height:70px;
border-radius:50%;
border:3px solid #6a5cff;
overflow:hidden;
cursor:pointer;
}

.story img{
width:100%;
height:100%;
object-fit:cover;
}

/* Post */
.post{
background:rgba(255,255,255,0.05);
margin-bottom:20px;
border-radius:20px;
overflow:hidden;
padding-bottom:10px;
}

.post img{
width:100%;
max-height:400px;
object-fit:cover;
}

.post-content{
padding:10px 15px;
}

.like{
cursor:pointer;
margin-top:5px;
}

.comment-box{
margin-top:10px;
display:flex;
gap:10px;
}

.comment-box input{
flex:1;
padding:6px;
border-radius:10px;
border:none;
}

.comments{
margin-top:8px;
font-size:14px;
opacity:0.8;
}

/* Upload */
.upload{
background:rgba(255,255,255,0.05);
padding:15px;
border-radius:20px;
margin-bottom:20px;
}

/* Search */
#search{
width:100%;
padding:10px;
margin-bottom:15px;
border-radius:20px;
border:none;
}

/* Modal Story */
#storyModal{
position:fixed;
top:0;left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.9);
display:none;
align-items:center;
justify-content:center;
z-index:999;
}

#storyModal img{
max-width:80%;
max-height:80%;
border-radius:20px;
}

.dark{
background:#000;
}

</style>
</head>
<body>

<header>
<h1>MemoryGram</h1>
<button onclick="toggleDark()">üåô</button>
</header>

<div class="container">

<input type="text" id="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏û‡∏™‡∏ï‡πå..." onkeyup="searchPost()">

<!-- Stories -->
<div class="stories" id="stories"></div>

<!-- Upload -->
<div class="upload">
<h3>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</h3>
<input type="file" id="uploadImg" accept="image/*">
<input type="text" id="caption" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏Ñ‡∏õ‡∏ä‡∏±‡∏ô...">
<button onclick="addPost()">‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
</div>

<!-- Feed -->
<div id="feed"></div>

</div>

<!-- Story Modal -->
<div id="storyModal" onclick="this.style.display='none'">
<img id="storyImg">
</div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let stories = JSON.parse(localStorage.getItem("stories")) || [];

function save(){
localStorage.setItem("posts", JSON.stringify(posts));
localStorage.setItem("stories", JSON.stringify(stories));
}

function render(){
let feed = document.getElementById("feed");
feed.innerHTML="";
posts.forEach((p,index)=>{
feed.innerHTML += `
<div class="post">
<img src="${p.img}">
<div class="post-content">
<p><strong>${p.caption}</strong></p>
<p class="like" onclick="likePost(${index})">‚ù§Ô∏è ${p.likes}</p>
<div class="comments">
${p.comments.map(c=>`<div>üí¨ ${c}</div>`).join("")}
</div>
<div class="comment-box">
<input type="text" id="comment${index}" placeholder="‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå...">
<button onclick="addComment(${index})">‡∏™‡πà‡∏á</button>
</div>
</div>
</div>
`;
});
}

function renderStories(){
let s = document.getElementById("stories");
s.innerHTML="";
stories.forEach((st,i)=>{
s.innerHTML += `
<div class="story" onclick="openStory(${i})">
<img src="${st}">
</div>
`;
});
}

function addPost(){
let file = document.getElementById("uploadImg").files[0];
let caption = document.getElementById("caption").value;
if(!file) return;

let reader = new FileReader();
reader.onload = function(e){
posts.unshift({img:e.target.result, caption:caption, likes:0, comments:[]});
stories.unshift(e.target.result);
save();
render();
renderStories();
}
reader.readAsDataURL(file);

document.getElementById("caption").value="";
}

function likePost(i){
posts[i].likes++;
save();
render();
}

function addComment(i){
let input = document.getElementById("comment"+i);
if(input.value.trim() === "") return;
posts[i].comments.push(input.value);
save();
render();
}

function openStory(i){
document.getElementById("storyImg").src = stories[i];
document.getElementById("storyModal").style.display="flex";
}

function toggleDark(){
document.body.classList.toggle("dark");
}

function searchPost(){
let keyword = document.getElementById("search").value.toLowerCase();
let filtered = posts.filter(p=>p.caption.toLowerCase().includes(keyword));
let feed = document.getElementById("feed");
feed.innerHTML="";
filtered.forEach((p,index)=>{
feed.innerHTML += `
<div class="post">
<img src="${p.img}">
<div class="post-content">
<p><strong>${p.caption}</strong></p>
<p>‚ù§Ô∏è ${p.likes}</p>
</div>
</div>
`;
});
}

render();
renderStories();
</script>

</body>
</html>
